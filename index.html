<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Maimoon Gem Pro</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#d4af37">
</head>
<body>

<div id="login-screen">
    <div class="login-card">
        <img src="logo.png" alt="Maimoon Logo" style="width:120px; margin-bottom:10px;">
        <h1 style="color:#d4af37; margin:0;">MAIMOON</h1>
        <p>Management System</p>
        <input type="password" id="pin-field" class="pin-input" placeholder="PIN">
        <button class="btn-main" onclick="checkPin()">SIGN IN</button>
    </div>
</div>

<div class="container no-print hidden" id="main-interface">
    <div class="header-bar">
        <span>Logged: <b id="user-display">Admin</b></span>
        <button onclick="signOff()" class="btn-red">SIGN OFF</button>
    </div>

    <div class="nav">
        <button id="n-inv" onclick="tab('inventory')">INVENTORY</button>
        <button id="n-sal" onclick="tab('sales')">SALES</button>
        <button id="n-ret" onclick="tab('returns')">RETURN</button>
        <button id="n-rep" onclick="tab('reports')">REPORT</button>
        <button id="n-set" onclick="tab('settings')">SETTINGS</button>
    </div>

    <div id="p-inventory" class="hidden">
        <div class="card">
            <h3>Add Inventory</h3>
            <input type="text" id="t-id" placeholder="Gem ID">
            <input type="text" id="t-type" placeholder="Gem Type / Name">
            <div style="display:flex; gap:5px;">
                <input type="number" id="t-qty" placeholder="Pcs">
                <input type="number" id="t-carat" step="0.01" placeholder="Carats">
            </div>
            <input type="number" id="t-cost" placeholder="Total Cost (LKR)">
            <button class="btn-main" onclick="saveStock()">Save to Stock</button>
        </div>
        <input type="text" id="inv-search" placeholder="ðŸ” Search Inventory..." onkeyup="render()">
        <div class="list-container" id="stock-list"></div>
    </div>

    <div id="p-sales" class="hidden">
        <div class="card">
            <h3>New Sale</h3>
            <select id="s-select" onchange="updateSaleHint()"></select>
            <p id="s-hint" class="hint"></p>
            <div style="display:flex; gap:5px;">
                <input type="number" id="s-qty" placeholder="Qty Pcs">
                <input type="number" id="s-carat" step="0.01" placeholder="Carats Sold">
            </div>
            <input type="text" id="s-buyer" placeholder="Customer Name">
            <input type="number" id="s-price" placeholder="Sale Amount (LKR)">
            
            <select id="s-pay-type" onchange="togglePartialInput()">
                <option value="Full">Full Payment (Paid)</option>
                <option value="Partial">Partial Payment (Due)</option>
            </select>
            <input type="number" id="s-paid" class="hidden" placeholder="Amount Paid Now">
            
            <button class="btn-main" onclick="processSale()">Save & Print Invoice</button>
        </div>
    </div>

    <div id="p-returns" class="hidden">
        <div class="card border-orange">
            <h3>Returns</h3>
            <select id="ret-flow">
                <option value="Customer">Customer Return (Stock In)</option>
                <option value="Supplier">Supplier Return (Stock Out)</option>
            </select>
            <input type="text" id="ret-ref" placeholder="Invoice # or Gem ID">
            <input type="number" id="ret-qty" placeholder="Pcs">
            <input type="number" id="ret-carat" placeholder="Carats">
            <button class="btn-main bg-orange" onclick="processReturn()">Process Return</button>
        </div>
    </div>

    <div id="p-reports" class="hidden">
        <div class="stat-grid">
            <div class="stat-box">Sales: <b id="r-rev">0</b></div>
            <div class="stat-box">Profit: <b id="r-prof">0</b></div>
        </div>
        <div class="card">
            <h4>Payment Due (Balances)</h4>
            <div id="due-report-list"></div>
        </div>
        <div class="card">
            <h4>Sales History</h4>
            <div id="report-list"></div>
        </div>
    </div>

    <div id="p-settings" class="hidden">
        <div class="card">
            <h3>Backup & Restore</h3>
            <button onclick="exportData()" class="btn-main bg-purple">Export Backup</button>
            <hr>
            <input type="file" id="importFile">
            <button onclick="importData()" class="btn-main bg-dark">Restore Backup</button>
        </div>
    </div>
</div>

<div id="print-area" class="hidden"></div>

<script src="script.js"></script>
</body>
</html>
